import os
import random
from aiogram import Bot, Dispatcher, types
from aiogram.utils import executor

# áŠ¨BotFather á‹«áŒˆáŠ˜áŠ¸á‹áŠ• Token áŠ¥á‹šáˆ… áŒ‹áˆ­ áŠ áˆµáŒˆá‰£ (á‹ˆá‹­áˆ Render áˆ‹á‹­ áŠ¥áŠ“áˆµá‰°áŠ«áŠ­áˆ‹áˆˆáŠ•)
TOKEN = os.getenv("BOT_TOKEN") 
bot = Bot(token=TOKEN)
dp = Dispatcher(bot)

# á‰°áŒ á‰ƒáˆšá‹ /start áˆ²áˆ á‹¨áˆšáˆ˜áŒ£ áˆ˜áˆá‹•áŠ­á‰µ
@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
    await message.reply("áŠ¥áŠ•áŠ³áŠ• á‹ˆá‹° á‹³á‹­áˆµ áŒ¨á‹‹á‰³ á‰ áˆ°áˆ‹áˆ áˆ˜áŒ¡! ğŸ²\n\náˆˆáˆ˜áŒ«á‹ˆá‰µ /play á‹¨áˆšáˆˆá‹áŠ• á‹­áŒ«áŠ‘á¢")

# á‰°áŒ á‰ƒáˆšá‹ /play áˆ²áˆ á‹³á‹­áˆµ á‹­áŒ£áˆ‹áˆ
@dp.message_handler(commands=['play'])
async def roll_dice(message: types.Message):
    # á‰´áˆŒáŒáˆ«áˆ áŠ¥á‹áŠá‰°áŠ› á‹³á‹­áˆµ áŠ¥áŠ•á‹²áŒ¥áˆ á‹«á‹°áˆ­áŒ‹áˆ
    dice_msg = await bot.send_dice(message.chat.id, emoji='ğŸ²')
    result = dice_msg.dice.value
    
    # á‹¨áŒ¨á‹‹á‰³á‹ áˆ…áŒ (áˆˆáˆáˆ³áˆŒ áŠ¨3 á‰ áˆ‹á‹­ áŠ áˆ¸áŠ“áŠ)
    if result > 3:
        await message.answer(f"á‹áŒ¤á‰± {result} áŠá‹! áŠ áˆ¸áŠ•áˆáˆƒáˆ! ğŸ’°")
    else:
        await message.answer(f"á‹áŒ¤á‰± {result} áŠá‹! á‰°áˆ¸áŠ•áˆáˆƒáˆá¢ á‰ áˆšá‰€áŒ¥áˆˆá‹ á‹­áˆ³áŠ«áˆáˆ…! ğŸ˜”")

if __name__ == '__main__':
    executor.start_polling(dp)